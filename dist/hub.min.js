!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,function(){var r=e.Cookies,o=e.Cookies=t();o.noConflict=function(){return e.Cookies=r,o}}())}(this,function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)e[o]=r[o]}return e}function t(r,o){function n(t,n,i){if("undefined"!=typeof document){i=e({},o,i),"number"==typeof i.expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in i)i[a]&&(s+="; "+a,i[a]!==!0&&(s+="="+i[a].split(";")[0]));return document.cookie=t+"="+r.write(n,t)+s}}function i(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],o={},n=0;n<t.length;n++){var i=t[n].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(o[a]=r.read(s,a),e===a)break}catch(c){}}return e?o[e]:o}}return Object.create({set:n,get:i,remove:function(t,r){n(t,"",e({},r,{expires:-1}))},withAttributes:function(r){return t(this.converter,e({},this.attributes,r))},withConverter:function(r){return t(e({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(r)}})}var r={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},o=t(r,{path:"/"});return o}),function(e){var t=function(e,t){this._Cookies=e.withAttributes(t)};t.prototype={getItem:function(e){var t=this._Cookies.get(e);return void 0!==t?t:null},setItem:function(e,t,r){this._Cookies.set(e,t,r)},removeItem:function(e,t){this._Cookies.remove(e,t)},get length(){var e=this._Cookies.get();return Object.keys(e).length},key:function(e){var t=this._Cookies.get();return Object.keys(t)[e]},clear:function(){var e=this._Cookies.get();Object.keys(e).forEach(function(e){this._Cookies.remove(e)},this)}};var r={};r.init=function(o,n){var i=!0;try{window.localStorage||(i=!1),window.sessionStorage||(i=!1)}catch(s){i=!1}if(!i)try{return window.parent.postMessage("cross-storage:unavailable","*")}catch(s){return}r._stores={undefined:window.localStorage,localStorage:window.localStorage,sessionStorage:window.sessionStorage},e.Cookies&&(r._stores.cookieStorage=new t(e.Cookies,n)),r._permissions=o||[],r._installListener(),window.parent.postMessage("cross-storage:ready","*")},r._installListener=function(){var e=r._listener;window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e)},r._listener=function(e){var t,o,n,i,s,a,c;if(t="null"===e.origin?"file://":e.origin,"cross-storage:poll"===e.data)return window.parent.postMessage("cross-storage:ready",e.origin);if("cross-storage:ready"!==e.data){try{n=JSON.parse(e.data)}catch(u){return}if(n&&"string"==typeof n.method&&(i=n.method.split("cross-storage:")[1])){if(r._permitted(t,i))try{a=r["_"+i](n.params)}catch(u){s=u.message}else s="Invalid permissions for "+i;c=JSON.stringify({id:n.id,error:s,result:a}),o="file://"===t?"*":t,window.parent.postMessage(c,o)}}},r._permitted=function(e,t){var o,n,i,s;if(o=["get","set","del","clear","getKeys"],!r._inArray(t,o))return!1;for(n=0;n<r._permissions.length;n++)if(i=r._permissions[n],i.origin instanceof RegExp&&i.allow instanceof Array&&(s=i.origin.test(e),s&&r._inArray(t,i.allow)))return!0;return!1},r._set=function(e){this._stores[e.store].setItem(e.key,e.value,e.attrs)},r._get=function(e){var t,r,o,n;for(t=this._stores[e.store],r=[],o=0;o<e.keys.length;o++){try{n=t.getItem(e.keys[o])}catch(i){n=null}r.push(n)}return r.length>1?r:r[0]},r._del=function(e){for(var t=this._stores[e.store],r=0;r<e.keys.length;r++)t.removeItem(e.keys[r])},r._clear=function(e){this._stores[e.store].clear()},r._getKeys=function(e){var t,r,o,n;for(o=[],n=this._stores[e.store],r=n.length,t=0;r>t;t++)o.push(n.key(t));return o},r._inArray=function(e,t){for(var r=0;r<t.length;r++)if(e===t[r])return!0;return!1},r._now=function(){return"function"==typeof Date.now?Date.now():(new Date).getTime()},e.CrossStorageHub=r}(this);